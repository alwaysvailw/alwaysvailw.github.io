<?xml version="1.0" encoding="utf-8"?>
<feed xmlns="http://www.w3.org/2005/Atom">
  <title>Wei&#39;s Blog</title>
  
  
  <link href="/atom.xml" rel="self"/>
  
  <link href="http://blog.dev4wei.cn/"/>
  <updated>2019-11-08T03:36:25.593Z</updated>
  <id>http://blog.dev4wei.cn/</id>
  
  <author>
    <name>Wei Wei</name>
    
  </author>
  
  <generator uri="http://hexo.io/">Hexo</generator>
  
  <entry>
    <title>搭建Hexo博客相册</title>
    <link href="http://blog.dev4wei.cn/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%86%8C/"/>
    <id>http://blog.dev4wei.cn/搭建Hexo博客相册/</id>
    <published>2019-11-08T03:08:04.000Z</published>
    <updated>2019-11-08T03:36:25.593Z</updated>
    
    <content type="html"><![CDATA[<blockquote><p>转自: <a href="https://malizhi.cn/HexoAlbum/" target="_blank" rel="noopener">搭建Hexo博客相册</a></p></blockquote><a id="more"></a><blockquote><p>注意点：hexo的Next主题默认是不含有相册页面的,如果想添加此页面需自行编写</p></blockquote><h4 id="图片的处理"><a href="#图片的处理" class="headerlink" title="图片的处理"></a>图片的处理</h4><ul><li>资源图片是保存在云端上，此教程是存放在GitHub上，可以适当修改放在七牛云也行。首先在电脑上随便一个位置创建一个新的文件夹，这里我创建文件夹名称叫Blog_Album，然后打开git，cd到此文件夹执行<code>git init</code>命令创建git仓库，在此文件夹内新建一个文件夹/photos 在这里存放你需要放在博客中的图片。</li><li>使用一个Python小脚本对图片进行压缩编辑，并且上传到自己的GitHub，这就需要我们现在GitHub上新建一个Repository,这里我依然命名为Blog_Album, 然后在本地连接远程仓库执行git remote add origin yourrepositroy@gitaddress</li><li>然后下载脚本<a href="https://github.com/malizhigithub/HexoAlbumData/blob/master/tool.py" target="_blank" rel="noopener">tool.py</a>文件至此文件内，此文件需要<a href="https://github.com/malizhigithub/HexoAlbumData/blob/master/ImageProcess.py" target="_blank" rel="noopener">Imageprocessing.py</a>文件的支持,可以将此文件保存在你的python3包的安装位置<br><code>C:\Users\username\AppData\Local\Programs\Python\Python35-32\Lib\site-packages</code></li><li>执行tool.py的时候如果没有PIL库的话会报错，安装即可。安装PIL只需在cmd中执行：<code>pip install Pillow</code>就可以了。<br>此外图片命名方式需要按照特定方式即：2017-02-02_discriptionofyourpic.jpg，图片的格式支持常见格式，时间和描述之间存在下划线。</li><li>执行tool.py的命令：cmd中<code>python tool.py（文件所处位置完整路径）</code>，例如：<code>python E:\malizhiBlog\HexoAlbumData\tool.py</code> ,执行后会生成data.json文件，此文件存储了图片的链接，名称和简介，存放位置修改为你的hexo博客主题下特定位置，这里因为是后期加入的相册，所以我在/hexo/themes/next/source/lib中新建一个文件夹album来存放相册文件。所以tool.py生成data.json需要存放在这里。大约在133行中进行修改</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">- with open(&quot;E://YourBlog/themes/next/source/lib/album/data.json&quot;,&quot;w&quot;) as fp:</span><br><span class="line">+ with open(&quot;YourBolgPath/themes/next/source/lib/album/data.json&quot;,&quot;w&quot;) as fp:</span><br></pre></td></tr></table></figure><h4 id="博客相册页面"><a href="#博客相册页面" class="headerlink" title="博客相册页面"></a>博客相册页面</h4><ul><li>在博客根目录下添加photo页面<code>hexo n page photos</code>,在blog的themes的Next中的_config.yml配置文件中menu选项中添加photos:</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">menu:</span><br><span class="line">  home: / || home</span><br><span class="line">  about: /about/ || user</span><br><span class="line">  categories: /categories/ || th-list</span><br><span class="line">  tags: /tags/ || tags</span><br><span class="line">  archives: /archives/ || archive</span><br><span class="line">  #schedule: /schedule/ || calendar</span><br><span class="line">  音乐: /music/ || music</span><br><span class="line">+ 相册: /photos  || camera</span><br></pre></td></tr></table></figure><p>在photos中的index.md添加上下面代码</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br></pre></td><td class="code"><pre><span class="line">---</span><br><span class="line">title: 照片</span><br><span class="line">date: 2018-09-02 21:00:00</span><br><span class="line">type: photos</span><br><span class="line">fancybox: false</span><br><span class="line">comments: true</span><br><span class="line">---</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;../lib/album/ins.css&quot;&gt;</span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;../lib/album/photoswipe.css&quot;&gt; </span><br><span class="line">&lt;link rel=&quot;stylesheet&quot; href=&quot;../lib/album/default-skin/default-skin.css&quot;&gt; </span><br><span class="line">&lt;div class=&quot;photos-btn-wrap&quot;&gt;</span><br><span class="line">  &lt;a class=&quot;photos-btn active&quot; href=&quot;javascript:void(0)&quot; target=&quot;_blank&quot; rel=&quot;external&quot;&gt;Photos&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line">&lt;div class=&quot;instagram itemscope&quot;&gt;</span><br><span class="line">  &lt;a href=&quot;http://yourbolg.com&quot; target=&quot;_blank&quot; class=&quot;open-ins&quot;&gt;图片正在加载中…&lt;/a&gt;</span><br><span class="line">&lt;/div&gt;</span><br><span class="line"> </span><br><span class="line">&lt;script&gt;</span><br><span class="line">  (function() &#123;</span><br><span class="line">    var loadScript = function(path) &#123;</span><br><span class="line">      var $script = document.createElement(&apos;script&apos;)</span><br><span class="line">      document.getElementsByTagName(&apos;body&apos;)[0].appendChild($script)</span><br><span class="line">      $script.setAttribute(&apos;src&apos;, path)</span><br><span class="line">    &#125;</span><br><span class="line">    setTimeout(function() &#123;</span><br><span class="line">        loadScript(&apos;../lib/album/ins.js&apos;)</span><br><span class="line">    &#125;, 0)</span><br><span class="line">  &#125;)()</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure><p>从index就可以看出我们还需要添加css文件和js文件，这些文件我已经上传到GitHub中的<a href="https://github.com/malizhigithub/HexoAlbumData/tree/master/JS%26CSS" target="_blank" rel="noopener">JS&amp;CSS文件夹</a>中，在这里需要把这个文件夹中的所有文件包括此文件夹下的所有目录都拷贝到前面创建的/hexo/themes/next/source/lib/album中。</p><p><strong>JS&amp;CSS文件夹中的内容如下：</strong><br><a href="https://malizhi-blog-1252037601.cos.ap-guangzhou.myqcloud.com/搭建Hexo博客相册/文件夹内容.png" target="_blank" rel="noopener"><img src="https://malizhi-blog-1252037601.cos.ap-guangzhou.myqcloud.com/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%86%8C/%E6%96%87%E4%BB%B6%E5%A4%B9%E5%86%85%E5%AE%B9.png" alt="img"></a><br>然后再将<a href="https://github.com/malizhigithub/HexoAlbumData/blob/master/photoswipe-ui-default.min.js" target="_blank" rel="noopener">photoswipe-ui-default.min.js</a>, <a href="https://github.com/malizhigithub/HexoAlbumData/blob/master/photoswipe.min.js" target="_blank" rel="noopener">photoswipe.min.js</a>两个文件添加到themes/next/source/js/src中。</p><p>对ins.js（ins.js在album文件夹中）文件进行一个简单的修正，将里面大约在121和122行左右的连接修改为你的GitHub中图片连接地址</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-    var minSrc = &apos;https://raw.githubusercontent.com/lizhi/Blog_Album/master/min_photos/&apos; + data.link[i];</span><br><span class="line">-    var src = &apos;https://raw.githubusercontent.com/lizhi/Blog_Album/master/photos/&apos; + data.link[i];</span><br><span class="line">+    var minSrc = &apos;https://raw.githubusercontent.com/yougithubname/pathtoyourphotos/min_photos/&apos; + data.link[i];</span><br><span class="line">+    var src = &apos;https://raw.githubusercontent.com/yougithubname/pathtoyourphotos/photos/&apos; + data.link[i];</span><br></pre></td></tr></table></figure><p>确保你的图片地址是正确的，否则加载不出来，检测方法可以将选择一个图片地址看能不能再浏览器中打开。</p><blockquote><p>注意点：图片的链接都是<a href="https://raw.githubusercontent.com/" target="_blank" rel="noopener">https://raw.githubusercontent.com</a> 开头的，不是图片的存储地址，否则加载不出</p></blockquote><h4 id="其他配置"><a href="#其他配置" class="headerlink" title="其他配置"></a>其他配置</h4><ul><li><p>上面属于资源的配置，下面是引用配置，在next/layout/_layout.swig的头部前添加对js文件的引用如下：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script src=&quot;&#123;&#123; url_for(theme.js) &#125;&#125;/src/photoswipe.min.js?v=&#123;&#123; theme.version &#125;&#125;&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script src=&quot;&#123;&#123; url_for(theme.js) &#125;&#125;/src/photoswipe-ui-default.min.js?v=&#123;&#123; theme.version &#125;&#125;&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure></li></ul><p>在body中添加如下的内容：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br></pre></td><td class="code"><pre><span class="line">&#123;% if page.type === &quot;photos&quot; %&#125;</span><br><span class="line">  &lt;!-- Root element of PhotoSwipe. Must have class pswp. --&gt;</span><br><span class="line">  &lt;div class=&quot;pswp&quot; tabindex=&quot;-1&quot; role=&quot;dialog&quot; aria-hidden=&quot;true&quot;&gt;</span><br><span class="line">    &lt;div class=&quot;pswp__bg&quot;&gt;&lt;/div&gt;</span><br><span class="line">    &lt;div class=&quot;pswp__scroll-wrap&quot;&gt;</span><br><span class="line">        &lt;div class=&quot;pswp__container&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;pswp__item&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;pswp__item&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;pswp__item&quot;&gt;&lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">        &lt;div class=&quot;pswp__ui pswp__ui--hidden&quot;&gt;</span><br><span class="line">            &lt;div class=&quot;pswp__top-bar&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;pswp__counter&quot;&gt;&lt;/div&gt;</span><br><span class="line">                &lt;button class=&quot;pswp__button pswp__button--close&quot; title=&quot;Close (Esc)&quot;&gt;&lt;/button&gt;</span><br><span class="line">                &lt;button class=&quot;pswp__button pswp__button--share&quot; title=&quot;Share&quot;&gt;&lt;/button&gt;</span><br><span class="line">                &lt;button class=&quot;pswp__button pswp__button--fs&quot; title=&quot;Toggle fullscreen&quot;&gt;&lt;/button&gt;</span><br><span class="line">                &lt;button class=&quot;pswp__button pswp__button--zoom&quot; title=&quot;Zoom in/out&quot;&gt;&lt;/button&gt;</span><br><span class="line">                &lt;!-- Preloader demo http://codepen.io/dimsemenov/pen/yyBWoR --&gt;</span><br><span class="line">                &lt;!-- element will get class pswp__preloader--active when preloader is running --&gt;</span><br><span class="line">                &lt;div class=&quot;pswp__preloader&quot;&gt;</span><br><span class="line">                    &lt;div class=&quot;pswp__preloader__icn&quot;&gt;</span><br><span class="line">                      &lt;div class=&quot;pswp__preloader__cut&quot;&gt;</span><br><span class="line">                        &lt;div class=&quot;pswp__preloader__donut&quot;&gt;&lt;/div&gt;</span><br><span class="line">                      &lt;/div&gt;</span><br><span class="line">                    &lt;/div&gt;</span><br><span class="line">                &lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;div class=&quot;pswp__share-modal pswp__share-modal--hidden pswp__single-tap&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;pswp__share-tooltip&quot;&gt;&lt;/div&gt; </span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">            &lt;button class=&quot;pswp__button pswp__button--arrow--left&quot; title=&quot;Previous (arrow left)&quot;&gt;</span><br><span class="line">            &lt;/button&gt;</span><br><span class="line">            &lt;button class=&quot;pswp__button pswp__button--arrow--right&quot; title=&quot;Next (arrow right)&quot;&gt;</span><br><span class="line">            &lt;/button&gt;</span><br><span class="line">            &lt;div class=&quot;pswp__caption&quot;&gt;</span><br><span class="line">                &lt;div class=&quot;pswp__caption__center&quot;&gt;&lt;/div&gt;</span><br><span class="line">            &lt;/div&gt;</span><br><span class="line">        &lt;/div&gt;</span><br><span class="line">    &lt;/div&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><ul><li>在/themes/next/layout/_scripts/pages/post-details.swig中添加：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;&#123;&#123; url_for(theme.js) &#125;&#125;/src/photoswipe.min.js?v=&#123;&#123; theme.version &#125;&#125;&quot;&gt;&lt;/script&gt;</span><br><span class="line">&lt;script type=&quot;text/javascript&quot; src=&quot;&#123;&#123; url_for(theme.js) &#125;&#125;/src/photoswipe-ui-default.min.js?v=&#123;&#123; theme.version &#125;&#125;&quot;&gt;&lt;/script&gt;</span><br></pre></td></tr></table></figure><ul><li>当主题设置fancyboxy为True时，在相册页面存在冲突去掉主题的fancybox所以对/themes/next/layout/_partials/head.swig文件进行修改：</li></ul><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">+&#123;% if page.type === &quot;photos&quot;  %&#125;</span><br><span class="line">+  &#123;% set theme.fancybox = false %&#125;</span><br><span class="line">+&#123;% endif %&#125;</span><br><span class="line">+&#123;% if page.type !== &quot;photos&quot;  %&#125;</span><br><span class="line">+  &#123;% set theme.fancybox = true %&#125;</span><br><span class="line">+&#123;% endif %&#125;</span><br><span class="line"></span><br><span class="line">&#123;% if theme.fancybox  %&#125;</span><br><span class="line">  &#123;% set fancybox_css_uri = url_for(theme.vendors._internal + &apos;/fancybox/source/jquery.fancybox.css?v=2.1.5&apos;) %&#125;</span><br><span class="line">  &#123;% if theme.vendors.fancybox_css %&#125;</span><br><span class="line">    &#123;% set fancybox_css_uri = theme.vendors.fancybox_css %&#125;</span><br><span class="line">  &#123;% endif %&#125;</span><br><span class="line">  &lt;link href=&quot;&#123;&#123; fancybox_css_uri &#125;&#125;&quot; rel=&quot;stylesheet&quot; type=&quot;text/css&quot; /&gt;</span><br><span class="line">&#123;% endif %&#125;</span><br></pre></td></tr></table></figure><ul><li>效果图：<br><a href="https://malizhi-blog-1252037601.cos.ap-guangzhou.myqcloud.com/搭建Hexo博客相册/相册效果图.png" target="_blank" rel="noopener"><img src="https://malizhi-blog-1252037601.cos.ap-guangzhou.myqcloud.com/%E6%90%AD%E5%BB%BAHexo%E5%8D%9A%E5%AE%A2%E7%9B%B8%E5%86%8C/%E7%9B%B8%E5%86%8C%E6%95%88%E6%9E%9C%E5%9B%BE.png" alt="img"></a></li></ul><p>至此相册的所有的配置已经完成，赶快部署发布吧。</p><hr><h4 id="相册和视频导航栏"><a href="#相册和视频导航栏" class="headerlink" title="相册和视频导航栏"></a>相册和视频导航栏</h4><p>2019年7月22日更新<br>关于相册页中相册和视频导航栏如何编写</p><p>1、在相册首页中（blog/source/photo/index.md），引入css文件<br><code>&lt;link rel=&quot;stylesheet&quot; href=&quot;../lib/vlog/css/style.css&quot;&gt;</code></p><p>css文件是放入到blog\themes\next\source\lib\vlog\css文件夹中（没有此文件夹自主创建），不是href的路径，href的路径是编译后的路径。</p><p>css文件已经上传到<code>https://github.com/malizhigithub/HexoAlbumData/tree/master/photo_video_tab</code></p><p>2、在body（index.md）中加入div（导航栏）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">&lt;div&gt;</span><br><span class="line">    &lt;ul class=&quot;nav nav-tabs nav-justified&quot; style=&quot;margin-top:-100px;&quot;&gt;</span><br><span class="line">    &lt;li id=&quot;li_album&quot; class=&quot;active&quot;&gt;&lt;a onclick=&quot;to_album()&quot;&gt;相册&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;li id=&quot;li_vlog&quot;&gt;&lt;a onclick=&quot;to_vlog()&quot;&gt;视频&lt;/a&gt;&lt;/li&gt;</span><br><span class="line">    &lt;/ul&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>3、在body（index.md）中加入div（视频）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=&quot;2&quot; style=&quot;display:none; margin-top:-50px;&quot;&gt;</span><br><span class="line">&lt;center&gt;&lt;b&gt;2017_12_19_视频1&lt;/b&gt;&lt;/center&gt;</span><br><span class="line">&#123;% dplayer &quot;url=https://xxx.mp4&quot; &quot;theme=#FADFA3&quot;  &quot;autoplay=false&quot; %&#125;</span><br><span class="line"></span><br><span class="line">&lt;center&gt;&lt;b&gt;视频2&lt;/b&gt;&lt;/center&gt;</span><br><span class="line">&#123;% dplayer &quot;url=https://xxx.mp4&quot; &quot;theme=#FADFA3&quot;  &quot;autoplay=false&quot; %&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure><p>4、继续在index.md加入以下脚本（导航栏切换）</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">function to_vlog()&#123;</span><br><span class="line">document.getElementById(&apos;1&apos;).style.display=&apos;none&apos;;</span><br><span class="line">document.getElementById(&apos;2&apos;).style.display=&apos;block&apos;;</span><br><span class="line">document.getElementById(&apos;li_vlog&apos;).setAttribute(&apos;class&apos;,&apos;active&apos;);</span><br><span class="line">document.getElementById(&apos;li_album&apos;).setAttribute(&apos;class&apos;,&apos;&apos;);</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">function to_album()&#123;</span><br><span class="line">document.getElementById(&apos;1&apos;).style.display=&apos;block&apos;;</span><br><span class="line">document.getElementById(&apos;2&apos;).style.display=&apos;none&apos;;</span><br><span class="line">document.getElementById(&apos;li_album&apos;).setAttribute(&apos;class&apos;,&apos;active&apos;);</span><br><span class="line">document.getElementById(&apos;li_vlog&apos;).setAttribute(&apos;class&apos;,&apos;&apos;);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure><p>导航栏编写完毕。</p>]]></content>
    
    <summary type="html">
    
      &lt;blockquote&gt;
&lt;p&gt;转自: &lt;a href=&quot;https://malizhi.cn/HexoAlbum/&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;搭建Hexo博客相册&lt;/a&gt;&lt;/p&gt;
&lt;/blockquote&gt;
    
    </summary>
    
      <category term="教程" scheme="http://blog.dev4wei.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="Hexo" scheme="http://blog.dev4wei.cn/tags/Hexo/"/>
    
      <category term="相册" scheme="http://blog.dev4wei.cn/tags/%E7%9B%B8%E5%86%8C/"/>
    
  </entry>
  
  <entry>
    <title>对接口设计的一些看法</title>
    <link href="http://blog.dev4wei.cn/%E5%AF%B9%E6%8E%A5%E5%8F%A3%E8%AE%BE%E8%AE%A1%E7%9A%84%E4%B8%80%E4%BA%9B%E7%9C%8B%E6%B3%95/"/>
    <id>http://blog.dev4wei.cn/对接口设计的一些看法/</id>
    <published>2019-09-12T02:54:26.000Z</published>
    <updated>2019-09-12T03:01:30.714Z</updated>
    
    <content type="html"><![CDATA[<p>设计阶段，前后端开发人员必须要经过充分协商，定义接口的基本格式，以及常用的错误处理流程</p><p><a href="https://github.com/ZhangBohan/http-api-design-ZH_CN" target="_blank" rel="noopener">HTTP API 设计指南</a></p>]]></content>
    
    <summary type="html">
    
      
      
        &lt;p&gt;设计阶段，前后端开发人员必须要经过充分协商，定义接口的基本格式，以及常用的错误处理流程&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://github.com/ZhangBohan/http-api-design-ZH_CN&quot; target=&quot;_blank&quot; rel=&quot;noo
      
    
    </summary>
    
      <category term="工作" scheme="http://blog.dev4wei.cn/categories/%E5%B7%A5%E4%BD%9C/"/>
    
    
      <category term="开发" scheme="http://blog.dev4wei.cn/tags/%E5%BC%80%E5%8F%91/"/>
    
  </entry>
  
  <entry>
    <title>基于CentOS搭建FTP文件服务</title>
    <link href="http://blog.dev4wei.cn/%E5%9F%BA%E4%BA%8ECentOS%E6%90%AD%E5%BB%BAFTP%E6%96%87%E4%BB%B6%E6%9C%8D%E5%8A%A1/"/>
    <id>http://blog.dev4wei.cn/基于CentOS搭建FTP文件服务/</id>
    <published>2019-04-06T20:03:04.000Z</published>
    <updated>2019-11-08T03:34:08.249Z</updated>
    
    <content type="html"><![CDATA[<p>腾讯云实验室</p><p><a href="https://cloud.tencent.com/developer/labs/lab/10002#stage-2-step-3-user" target="_blank" rel="noopener">基于 CentOS 搭建 FTP 文件服务</a></p><a id="more"></a><h2 id="安装并启动-FTP-服务"><a href="#安装并启动-FTP-服务" class="headerlink" title="安装并启动 FTP 服务"></a>安装并启动 FTP 服务</h2><p>安装 VSFTPD</p><p>vsftpd是 “very secure FTP deamon”的缩写，是一个完全免费，开源的ftp服务器软件。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">yum install vsftpd -y</span><br></pre></td></tr></table></figure><p>启动 VSFTPD<br>安装完成后，启动 FTP 服务：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service vsftpd start</span><br></pre></td></tr></table></figure><p>启动后，可以看到系统已经[监听了 21 端口]：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">netstat -nltp | grep 21</span><br></pre></td></tr></table></figure><p>此时，访问 ftp://&lt;您的 CVM IP 地址&gt; 可浏览机器上的 /var/ftp 目录了。</p><h2 id="配置-FTP-权限"><a href="#配置-FTP-权限" class="headerlink" title="配置 FTP 权限"></a>配置 FTP 权限</h2><p>目前 FTP 服务登陆允许匿名登陆，也无法区分用户访问，我们需要配置 FTP 访问权限</p><p>了解 VSFTP 配置</p><p>vsftpd 的配置目录为 /etc/vsftpd，包含下列的配置文件：</p><p>vsftpd.conf 为主要配置文件</p><p>ftpusers 配置禁止访问 FTP 服务器的用户列表</p><p>user_list 配置用户访问控制</p><p>阅读上述配置以了解更多信息。如果您准备好了，点击下一步开始修改配置来设置权限。</p><p>阻止匿名访问和切换根目录</p><p>匿名访问和切换根目录都会给服务器带来[安全风险]，我们把这两个功能关闭。</p><p>编辑 /etc/vsftpd/vsftpd.conf，[找到下面两处配置]并修改：</p><h3 id="禁用匿名用户"><a href="#禁用匿名用户" class="headerlink" title="禁用匿名用户"></a>禁用匿名用户</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">anonymous_enable=NO</span><br></pre></td></tr></table></figure><h3 id="禁止切换根目录"><a href="#禁止切换根目录" class="headerlink" title="禁止切换根目录"></a>禁止切换根目录</h3><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chroot_local_user=YES</span><br></pre></td></tr></table></figure><p>编辑完成后，按 Ctrl + S 保存配置，重新启动 FTP 服务，如：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">service vsftpd restart</span><br></pre></td></tr></table></figure><p>匿名访问让所有人都可以上传文件到服务器上而无需鉴权，而允许切换根目录则可能产生越权访问问题。</p><p>在代码编辑器中，用 Ctrl + F 进行搜索，Mac 用户用 Cmd + F 进行搜索</p><p>创建 FTP 用户</p><p>创建一个用户 ftpuser [?]：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">useradd ftpuser</span><br></pre></td></tr></table></figure><p>为用户 ftpuser 设置密码 [?]：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;Password&quot; | passwd ftpuser --stdin</span><br></pre></td></tr></table></figure><p>为了方便后面的实验步骤，不建议使用其它的用户名</p><p>下面命令中的密码为实验室为您生成，为了方便后面的实验步骤，不建议使用其他密码</p><p>限制该用户仅能通过 FTP 访问</p><p>限制用户 ftpuser 只能通过 FTP</p><p>访问服务器，而不能直接登录服务器：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -s /sbin/nologin ftpuser</span><br></pre></td></tr></table></figure><p>为用户分配主目录</p><p>为用户 ftpuser 创建[主目录]并约定：</p><p>/data/ftp 为主目录, 该目录不可上传文件</p><p>/data/ftp/pub 文件只能上传到该目录下</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">mkdir -p /data/ftp/pub</span><br></pre></td></tr></table></figure><p>创建登录欢迎文件 [?]：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">echo &quot;Welcome to use FTP service.&quot; &gt; /data/ftp/welcome.txt</span><br></pre></td></tr></table></figure><p>设置访问权限：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">chmod a-w /data/ftp &amp;&amp; chmod 777 -R /data/ftp/pub</span><br></pre></td></tr></table></figure><p>设置为用户的主目录：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">usermod -d /data/ftp ftpuser</span><br></pre></td></tr></table></figure><p>用户的主目录是用户通过 FTP 登录后看到的根目录</p><p>方便用户登录后可以看到欢迎信息，并且确定用户确实登录到了主目录上。</p><p>访问 FTP 服务</p><p>任务时间：5min ~ 10min</p><p>FTP 服务已安装并配置完成，下面我们来使用该 FTP 服务</p><p>访问 FTP 服务</p><p>根据您个人的工作环境，选择一种方式来访问已经搭建的 FTP 服务</p><p>通过 Windows 资源管理器访问</p><p>Windows 用户可以复制下面的[链接]到资源管理器的地址栏访问：</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">ftp://ftpuser:Password@&lt;您的 CVM IP 地址&gt;</span><br></pre></td></tr></table></figure><p>通过 FTP 客户端工具访问<br>FTP 客户端工具众多，下面推荐两个常用的：</p><p>WinSCP - Windows 下的 FTP 和 SFTP 连接客户端</p><p>FileZilla - 跨平台的 FTP 客户端，支持 Windows 和 Mac</p><p>下载和安装 FTP 客户端后，使用下面的凭据进行连接即可：</p><p>[主机]：</p><p>&lt;您的 CVM IP 地址&gt;</p><p>用户：</p><p>ftpuser</p><p>密码：</p><p>Password</p><p>如果能够正常连接，那么大功告成，您可以开始使用属于您自己的 FTP 服务器了！</p><p>接下来，请上传任意一张图片到您的 FTP 服务器上的pub目录下，然后，就可以在 /data/ftp/pub 中看到了。</p><p>注意: 请不要直接上传文件到根目录下，您应该选择上传到 pub 目录下</p><p>如果您申请了域名，可以将链接中的 Ip 地址替换为对应的域名访问 FTP 服务</p><p>如果您申请了域名，可以将Ip 地址替换为对应的域名作为访问凭据</p><p>大功告成<br>恭喜！您已经成功完成了搭建 FTP 服务器的实验任务。</p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;腾讯云实验室&lt;/p&gt;
&lt;p&gt;&lt;a href=&quot;https://cloud.tencent.com/developer/labs/lab/10002#stage-2-step-3-user&quot; target=&quot;_blank&quot; rel=&quot;noopener&quot;&gt;基于 CentOS 搭建 FTP 文件服务&lt;/a&gt;&lt;/p&gt;
    
    </summary>
    
      <category term="教程" scheme="http://blog.dev4wei.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
      <category term="Centos" scheme="http://blog.dev4wei.cn/categories/%E6%95%99%E7%A8%8B/Centos/"/>
    
    
      <category term="Centos" scheme="http://blog.dev4wei.cn/tags/Centos/"/>
    
      <category term="FTP" scheme="http://blog.dev4wei.cn/tags/FTP/"/>
    
  </entry>
  
  <entry>
    <title>Hexo+Next+GitHub搭建博客</title>
    <link href="http://blog.dev4wei.cn/Hexo-Next-GitHub%E6%90%AD%E5%BB%BA%E5%8D%9A%E5%AE%A2/"/>
    <id>http://blog.dev4wei.cn/Hexo-Next-GitHub搭建博客/</id>
    <published>2019-04-03T08:39:41.000Z</published>
    <updated>2019-11-08T03:35:06.302Z</updated>
    
    <content type="html"><![CDATA[<p>毕业大半年了，虽然工作的事情挺多的，但是吧，感觉知识面太窄了，需要用到的一些技术基本上也掌握了，还是得用闲暇时间提升一下自己。这两天买了个云服务器自己玩，本来想搭个Wordpress的博客（都已经搭好了），偶然间看到这个Hexo框架，感觉不错，一方面框架基于Node.js，有什么问题也能去看看代码，或者弄点自定义；另一方面也是写的博客还是想存放在本地，然后用GitHub同步保存。</p><a id="more"></a><p>写博客嘛，也是给自己多点动力，也能有个平台来给自己消化、记录，别到以后用到一样的东西的时候，忘了，忘了也就算了，又花一堆时间来找资料就真的太划不来了。emmm，第一篇也就是搭建这个基于Hexo+Next+GitHub的博客啦！</p><h2 id="附上网址"><a href="#附上网址" class="headerlink" title="附上网址"></a>附上网址</h2><h3 id="Hexo-https-hexo-io-zh-cn"><a href="#Hexo-https-hexo-io-zh-cn" class="headerlink" title="Hexo https://hexo.io/zh-cn/"></a>Hexo <a href="https://hexo.io/zh-cn/" target="_blank" rel="noopener">https://hexo.io/zh-cn/</a></h3><h3 id="Next-https-theme-next-org"><a href="#Next-https-theme-next-org" class="headerlink" title="Next https://theme-next.org"></a>Next <a href="https://theme-next.org" target="_blank" rel="noopener">https://theme-next.org</a></h3><h3 id="Github-https-github-com"><a href="#Github-https-github-com" class="headerlink" title="Github https://github.com/"></a>Github <a href="https://github.com/" target="_blank" rel="noopener">https://github.com/</a></h3><h3 id="参考"><a href="#参考" class="headerlink" title="参考"></a>参考</h3><p><a href="https://blog.csdn.net/sinat_37781304/article/details/82729029" target="_blank" rel="noopener">hexo史上最全搭建教程</a></p><p><a href="https://www.jianshu.com/p/8b5ace009307" target="_blank" rel="noopener">搭建Hexo博客相册</a></p><p>以下内容就是记着给自己回忆了，会记录一些碰到的问题，干货直接看上方的参考。</p><h2 id="教程"><a href="#教程" class="headerlink" title="教程"></a>教程</h2><p>建议看参考，该教程会省略一些基本的操作，比如GitHub的使用等。</p><p>安装 Hexo 相当简单。然而在安装前，您必须检查电脑中是否已安装下列应用程序：</p><ul><li>Node.js</li><li>Git</li></ul><p>如果您的电脑中已经安装上述必备程序，那么恭喜您！接下来只需要使用 npm 即可完成 Hexo 的安装。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm install -g hexo-cli</span><br></pre></td></tr></table></figure><p>安装 Hexo 完成后，请执行下列命令，Hexo 将会在指定文件夹中新建所需要的文件。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">$ hexo init &lt;folder&gt;</span><br><span class="line">$ cd &lt;folder&gt;</span><br><span class="line">$ npm install</span><br></pre></td></tr></table></figure><p>GitHub创建个人仓库，命名username.github.io。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">hexo clean</span><br><span class="line">hexo generate(hexo g)</span><br><span class="line">hexo deploy(hexo d)</span><br></pre></td></tr></table></figure><p>域名先设置解析，然后登录GitHub，进入之前创建的仓库，点击settings，设置Custom domain，输入域名<a href="dev4wei.cn">dev4wei.cn</a>。</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git clone https://github.com/theme-next/hexo-theme-next themes / next</span><br></pre></td></tr></table></figure><p>具体的配置就看Hexo和Next的文档了。</p><h2 id="一些问题的记录"><a href="#一些问题的记录" class="headerlink" title="一些问题的记录"></a>一些问题的记录</h2><h3 id="Git"><a href="#Git" class="headerlink" title="Git"></a>Git</h3><p>git clone命令后会产生.git文件，导致GitHub同步的时候部分源代码上传不了。我的想法是在每台机器上可以直接用GitHub进行同步，源代码缺失会很麻烦，每次得手动去做git clone操作。</p><p>那就记录一些有关于git的操作。</p><p>删除.git文件夹。</p><p>有可能还是找不到文件夹，那就清空缓存。<br><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git rm -rf --cached [./]filename</span><br></pre></td></tr></table></figure></p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fatal: pathspec &apos;[filename]&apos; did not match any files//报错</span><br></pre></td></tr></table></figure><p>原因：没有文件，或者是文件夹被.gitnore屏蔽了，修改.gitnore文件，删掉相关配置。</p><p>查看当前的远程仓库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote -v</span><br></pre></td></tr></table></figure><p>修改为想要设置的远程仓库</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git remote set-url origin https://where you want to put your repository to.git</span><br></pre></td></tr></table></figure><p>版本回退</p><figure class="highlight plain"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">git reset --hard commit_id</span><br></pre></td></tr></table></figure><h3 id="相册"><a href="#相册" class="headerlink" title="相册"></a>相册</h3><p>第一次搭没有成功，而且第一个人的教程写的有点乱，又看了几个人的教程，目前上面贴的这个教程，还是不错的，就搭起来了。值得注意的是，所需文件的引入位置，和代码中的URL一定要按照自己的项目目录来配置。</p><p>第二次搭的时候在index.md文件中的<script>标签里的URL卡了很久，因为没发现这里面也引入了css文件。emmm，这个教程貌似也没贴这个，知道是css文件没有引入成功，一直在ins.js里面找，后来才发现是index.md文件中引入的。</p></script></p>]]></content>
    
    <summary type="html">
    
      &lt;p&gt;毕业大半年了，虽然工作的事情挺多的，但是吧，感觉知识面太窄了，需要用到的一些技术基本上也掌握了，还是得用闲暇时间提升一下自己。这两天买了个云服务器自己玩，本来想搭个Wordpress的博客（都已经搭好了），偶然间看到这个Hexo框架，感觉不错，一方面框架基于Node.js，有什么问题也能去看看代码，或者弄点自定义；另一方面也是写的博客还是想存放在本地，然后用GitHub同步保存。&lt;/p&gt;
    
    </summary>
    
      <category term="教程" scheme="http://blog.dev4wei.cn/categories/%E6%95%99%E7%A8%8B/"/>
    
    
      <category term="Hexo" scheme="http://blog.dev4wei.cn/tags/Hexo/"/>
    
      <category term="Next" scheme="http://blog.dev4wei.cn/tags/Next/"/>
    
      <category term="GitHub" scheme="http://blog.dev4wei.cn/tags/GitHub/"/>
    
  </entry>
  
</feed>
